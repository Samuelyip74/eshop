{% extends "base.html" %}


{% block content %}
{% if not billing_profile %}
    <DIV class=container style='padding-top: 150px; padding-bottom: 100px'>
        <DIV class='row'>
            <DIV class='col-12 col-md-6'>
                <p class='lead'>Login</p>
                {% include 'accounts/snippets/form.html' with form=login_form next_url=request.build_absolute_uri %}
            </DIV>
            <DIV class='col-12 col-md-6'>
                <p class='lead'>Guest</p>
                {% url "guest_register" as guest_register_url %}
                {% include 'accounts/snippets/form.html' with form=guest_form next_url=request.build_absolute_uri action_url=guest_register_url %}

            </DIV>
        </DIV>
    </DIV>  
{% else %}
    <DIV class=container style='padding-top: 150px; padding-bottom: 100px'>
        {% if not object.shipping_address %}
                <p>Shipping Address</p>
                {% url "checkout_address_create" as checkout_address_create_url %}
                {% include 'addresses/form.html' with form=address_form next_url=request.build_absolute_uri action_url=checkout_address_create_url address_type='shipping' %}
        {% elif not object.billing_address %}
                <p>Billing Address</p>
                {% url "checkout_address_create" as checkout_address_create_url %}
                {% include 'addresses/form.html' with form=address_form next_url=request.build_absolute_uri action_url=checkout_address_create_url address_type='billing' %}
        {% else %}
                <h1>Checkout</h1>
                <p>Cart Total: {{ object.cart.total }}</p>
                <p>Shipping Total: {{ object.shipping.total }}</p>
                <p>Order Total: {{ object.total }}</p>
                <form class="form" method="POST" action="">  
                    {% csrf_token %}
                    <button class="btn btn-primary">Make Payment</button>
                </form>
        {% endif %}  
    </DIV>

{% endif %}


{% endblock %}